!function(e){"use strict";let t,n,r,s;const o=[];let i;function a(){t.innerHTML=""}function c(e,t){n.className=e,n.innerHTML=t}function l(e){let t,n,r,s="";const o=document.createElement("a");for(o.setAttribute("class","cl-card"),o.setAttribute("href",e.link),o.setAttribute("data-id",e.id),t=0;t<e.program_types.length;t++){switch(e.program_types[t].slug){case"bachelors":n=["ba","Bachelor&apos;s"];break;case"ph-d":n=["phd","Ph.D."];break;case"graduate-certificate":n=["cert","Certificate"];break;case"masters":n=["ma","Master&apos;s"];break;case"professional-degree":n=["pro","Professional"];break;default:n=[]}n.length&&(s+='<li class="'+n[0]+'">'+n[1]+"</li>")}return r=e.image,r+='<ul class="badges">'+s+"</ul>",r+='<div class="cl-card-text"><h3>'+e.title+"</h3></div>",r+='<div class="cl-button">Explore</div>',o.innerHTML=r,o}function u(t){let n;const r=function(t){let n,r;const s={},o=t.querySelectorAll("select");for(r=0;r<o.length;r++)n=e(o[r]).val(),s[e(o[r]).attr("name")]=null!==n?n:"all";return s}(t);for(n in r)f(n,r[n]);h()}function d(t,n){window.clearTimeout(i),(!1===e(t).is(":focus")&&n>1||""!==t.value)&&(i=window.setTimeout((function(){f("terms",t.value),h()}),300))}function f(e,t){let n;const r=window.location.toString(),s=new RegExp("([?&])"+e+"=.*?(&|$)","i"),o=-1!==r.indexOf("?")?"&":"?";n=r.match(s)?r.replace(s,"$1"+e+"="+t+"$2"):r+o+e+"="+t,history.pushState&&window.history.pushState({path:n},"",n)}function p(){let e,t;e={};const n=location.search.substring(1);return""!==n&&(e=n.split("&").reduce((function(e,n){return t=n.split("="),e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]),e}),{})),e}function h(){let e,t,n;const o=p();for(n in e=URIProgramFinder.base+"/wp-json/uri-programs/v1/category",o)t=-1!==e.indexOf("?")?"&":"?",e+=t+n+"="+o[n];o.terms&&(e+="&s="+o.terms),e!==s&&(c("loading",'<span class="spinner"><span></span></span><div>Loading...</div>'),s=e,function(e,t){r=new XMLHttpRequest,r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t(r.responseText):404===r.status&&(c("error","There was an error retrieving results."),a()))},r.open("GET",e,!0),r.send()}(e,m))}function m(n){let r,s,i,u,d;const f=JSON.parse(n),p=f.length;if(function(){let e;for(e in o)window.clearTimeout(o[e])}(),0===p)a(),c("empty","No matches found.");else if(d=1!==p?"programs match":"program matches",c("results",p+" "+d+" your search."),r=e("#program-results .cl-card"),r.length){for(u in i=[],f)i.push(f[u].id);for(r.each((function(){-1===i.indexOf(e(this).data("id"))&&e(this).remove()})),u=0;u<p;u++)!function(n){o.push(window.setTimeout((function(){s=e("#program-results .cl-card").eq(n.i),s.length?n.data.id!==s.data("id")&&s.before(l(n.data)):t.appendChild(l(n.data))}),20*n.i))}({data:f[u],i:u})}else for(u=0;u<p;u++)!function(e){o.push(window.setTimeout((function(){t.appendChild(l(e.data))}),20*e.i))}({data:f[u],i:u})}window.addEventListener("load",(function(){(function(r){let s,o,i=0;(function(e){t=document.createElement("div"),t.id="program-results",t.className="cl-tiles thirds fitted reveal",e.parentNode.insertBefore(t,e.nextSibling)})(r),function(e){n=document.createElement("div"),n.id="program-status",e.parentNode.insertBefore(n,e.nextSibling)}(r);const a=r.querySelectorAll(".program-finder-nojs");for(s=0;s<a.length;s++)a[s].style.display="none";const c=r.querySelector(".has-js");e(c).css("display","block");const l=c.querySelector('input[name="s"]');l&&(l.addEventListener("keyup",(function(){d(this,i)}),!1),l.addEventListener("blur",(function(){i++,d(this,i)}),!1),l.value=l.value.replace(/-/g," "),l.focus());c.addEventListener("keydown",(function(e){13===(e.keyCode||e.which||0)&&(e.preventDefault(),l.blur())}));const p=c.querySelectorAll("select");for(s=0;s<p.length;s++)o=e(p[s]).find("option:eq(0)"),e(o).html("").removeAttr("selected");(function(t,n){let r;for(r=0;r<n.length;r++)e(n[r]).chosen().on("change",(function(){u(t)}))})(c,p),c.querySelector("#js-form-reset").addEventListener("click",(function(){!function(t,n,r){n.value="",f("terms",n.value),e(r).each((function(){this.selectedIndex=-1,e(this).trigger("chosen:updated"),f(e(this).attr("name"),"any")})),h()}(0,l,p)})),h()})(document.getElementById("program-finder")),null===p().terms&&f("terms","")}),!1)}(jQuery);