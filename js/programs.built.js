!function(e){"use strict";let t,n,r,i;const s=[];let a;function o(){t.innerHTML=""}function c(e,t){n.className=e,n.innerHTML=t}function l(e){let t,n,r,i="";const s=document.createElement("a");for(s.setAttribute("class","cl-card"),s.setAttribute("href",e.link),s.setAttribute("data-id",e.id),t=0;t<e.program_types.length;t++){switch(e.program_types[t].slug){case"bachelors":n=["ba","Bachelor&apos;s"];break;case"ph-d":n=["phd","Ph.D."];break;case"graduate-certificate":n=["cert","Certificate"];break;case"undergraduate-certificate":n=["ucert","Undergraduate Certificate"];break;case"masters":n=["ma","Master&apos;s"];break;case"professional-degree":n=["pro","Professional"];break;case"minor":n=["min","Minor"];break;default:n=[]}n.length&&(i+='<li class="'+n[0]+'">'+n[1]+"</li>")}return r=e.image,r+='<ul class="badges">'+i+"</ul>",r+='<div class="cl-card-text"><h3>'+e.title+"</h3></div>",r+='<div class="cl-button">Explore</div>',s.innerHTML=r,s}function u(t){let n;const r=function(t){let n,r;const i={},s=t.querySelectorAll("select");for(r=0;r<s.length;r++)n=e(s[r]).val(),i[e(s[r]).attr("name")]=null!==n?n:"all";return i}(t);for(n in r)f(n,r[n]);h()}function d(t,n){window.clearTimeout(a),(!1===e(t).is(":focus")&&n>1||""!==t.value)&&(a=window.setTimeout((function(){f("terms",t.value),h()}),300))}function f(e,t){let n;const r=window.location.toString(),i=new RegExp("([?&])"+e+"=.*?(&|$)","i"),s=-1!==r.indexOf("?")?"&":"?";n=r.match(i)?r.replace(i,"$1"+e+"="+t+"$2"):r+s+e+"="+t,history.pushState&&window.history.pushState({path:n},"",n)}function p(){let e,t;e={};const n=location.search.substring(1);return""!==n&&(e=n.split("&").reduce((function(e,n){return t=n.split("="),e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]),e}),{})),e}function h(){let e,t,n;const s=p();for(n in e=URIProgramFinder.base+"/wp-json/uri-programs/v1/category",s)t=-1!==e.indexOf("?")?"&":"?",e+=t+n+"="+s[n];s.terms&&(e+="&s="+s.terms),e!==i&&(c("loading",'<span class="spinner"><span></span></span><div>Loading...</div>'),i=e,function(e,t){r=new XMLHttpRequest,r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t(r.responseText):404===r.status&&(c("error","There was an error retrieving results."),o()))},r.open("GET",e,!0),r.send()}(e,m))}function m(n){let r,i,a,u,d;const f=JSON.parse(n),p=f.length;if(function(){let e;for(e in s)window.clearTimeout(s[e])}(),0===p)o(),c("empty","No matches found.");else if(d=1!==p?"programs match":"program matches",c("results",p+" "+d+" your search."),r=e("#program-results .cl-card"),r.length){for(u in a=[],f)a.push(f[u].id);for(r.each((function(){-1===a.indexOf(e(this).data("id"))&&e(this).remove()})),u=0;u<p;u++)!function(n){s.push(window.setTimeout((function(){i=e("#program-results .cl-card").eq(n.i),i.length?n.data.id!==i.data("id")&&i.before(l(n.data)):t.appendChild(l(n.data))}),20*n.i))}({data:f[u],i:u})}else for(u=0;u<p;u++)!function(e){s.push(window.setTimeout((function(){t.appendChild(l(e.data))}),20*e.i))}({data:f[u],i:u})}window.addEventListener("load",(function(){(function(r){let i,s,a=0;(function(e){t=document.createElement("div"),t.id="program-results",t.className="cl-tiles thirds fitted reveal",e.parentNode.insertBefore(t,e.nextSibling)})(r),function(e){n=document.createElement("div"),n.id="program-status",e.parentNode.insertBefore(n,e.nextSibling)}(r);const o=r.querySelectorAll(".program-finder-nojs");for(i=0;i<o.length;i++)o[i].style.display="none";const c=r.querySelector(".has-js");e(c).css("display","block");const l=c.querySelector('input[name="s"]');l&&(l.addEventListener("keyup",(function(){d(this,a)}),!1),l.addEventListener("blur",(function(){a++,d(this,a)}),!1),l.value=l.value.replace(/-/g," "),l.focus());c.addEventListener("keydown",(function(e){13===(e.keyCode||e.which||0)&&(e.preventDefault(),l.blur())}));const p=c.querySelectorAll("select");for(i=0;i<p.length;i++)s=e(p[i]).find("option:eq(0)"),e(s).html("").removeAttr("selected");(function(t,n){let r;for(r=0;r<n.length;r++)e(n[r]).select2({width:"100%"}).on("change",(function(){u(t)}))})(c,p),c.querySelector("#js-form-reset").addEventListener("click",(function(){!function(t,n,r){n.value="",f("terms",n.value),e(r).each((function(){this.selectedIndex=-1,e(this).trigger("select2:updated"),f(e(this).attr("name"),"any")})),h()}(0,l,p)})),h()})(document.getElementById("program-finder")),null===p().terms&&f("terms","")}),!1)}(jQuery);