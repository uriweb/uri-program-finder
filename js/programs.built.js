!function(e){"use strict";let t,n,r,a;const i=[];let s;function o(){t.innerHTML=""}function c(e,t){n.className=e,n.innerHTML=t}function l(e){let t,n,r,a="";const i=document.createElement("a");for(i.setAttribute("class","cl-card"),i.setAttribute("href",e.link),i.setAttribute("data-id",e.id),t=0;t<e.program_types.length;t++){switch(e.program_types[t].slug){case"accelerated":n=["acc","Accelerated Option"];break;case"bachelors":n=["ba","Bachelor&apos;s"];break;case"ph-d":n=["phd","Ph.D."];break;case"graduate-certificate":n=["cert","Certificate"];break;case"undergraduate-certificate":n=["ucert","Undergraduate Certificate"];break;case"masters":n=["ma","Master&apos;s"];break;case"professional-degree":n=["pro","Professional"];break;case"minor":n=["min","Minor"];break;default:n=[]}n.length&&(a+='<li class="'+n[0]+'" title="'+n[1]+'">'+n[1]+"</li>")}return r='<div class="cl-card-container media">'+e.image+'<ul class="badges">'+a+"</ul></div>",r+='<div class="cl-card-container text"><div class="cl-card-text"><h3>'+e.title+"</h3></div></div>",r+='<div class="cl-card-container button">Explore</div>',i.innerHTML=r,i}function d(t){let n;const r=function(t){let n,r;const a={},i=t.querySelectorAll("select");for(r=0;r<i.length;r++)n=e(i[r]).val(),a[e(i[r]).attr("name")]=null!==n?n:"all";return a}(t);for(n in r)f(n,r[n]);m()}function u(t,n){window.clearTimeout(s),(!1===e(t).is(":focus")&&n>1||""!==t.value)&&(s=window.setTimeout((function(){f("terms",t.value),m()}),300))}function f(e,t){let n;const r=window.location.toString(),a=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==r.indexOf("?")?"&":"?";n=r.match(a)?r.replace(a,"$1"+e+"="+t+"$2"):r+i+e+"="+t,history.pushState&&window.history.pushState({path:n},"",n)}function p(){let e,t;e={};const n=location.search.substring(1);return""!==n&&(e=n.split("&").reduce((function(e,n){return t=n.split("="),e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]),e}),{})),e}function m(){let e,t,n;const i=p();for(n in e=URIProgramFinder.base+"/wp-json/uri-programs/v1/category",i)t=-1!==e.indexOf("?")?"&":"?",e+=t+n+"="+i[n];i.terms&&(e+="&s="+i.terms),e!==a&&(c("loading",'<span class="spinner"><span></span></span><div>Loading...</div>'),a=e,function(e,t){r=new XMLHttpRequest,r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t(r.responseText):404===r.status&&(c("error","There was an error retrieving results."),o()))},r.open("GET",e,!0),r.send()}(e,h))}function h(n){let r,a,s,d,u;const f=JSON.parse(n),p=f.length;if(function(){let e;for(e in i)window.clearTimeout(i[e])}(),0===p)o(),c("empty","No matches found.");else if(u=1!==p?"programs match":"program matches",c("results",p+" "+u+" your search."),r=e("#program-results .cl-card"),r.length){for(d in s=[],f)s.push(f[d].id);for(r.each((function(){-1===s.indexOf(e(this).data("id"))&&e(this).remove()})),d=0;d<p;d++)!function(n){i.push(window.setTimeout((function(){a=e("#program-results .cl-card").eq(n.i),a.length?n.data.id!==a.data("id")&&a.before(l(n.data)):t.appendChild(l(n.data))}),20*n.i))}({data:f[d],i:d})}else for(d=0;d<p;d++)!function(e){i.push(window.setTimeout((function(){t.appendChild(l(e.data))}),20*e.i))}({data:f[d],i:d})}window.addEventListener("load",(function(){(function(r){let a,i,s=0;(function(e){t=document.createElement("div"),t.id="program-results",t.className="cl-tiles thirds fitted reveal",e.parentNode.insertBefore(t,e.nextSibling)})(r),function(e){n=document.createElement("div"),n.id="program-status",e.parentNode.insertBefore(n,e.nextSibling)}(r);const o=r.querySelectorAll(".program-finder-nojs");for(a=0;a<o.length;a++)o[a].style.display="none";const c=r.querySelector(".has-js");e(c).css("display","block");const l=c.querySelector('input[name="s"]');l&&(l.addEventListener("keyup",(function(){u(this,s)}),!1),l.addEventListener("blur",(function(){s++,u(this,s)}),!1),l.value=l.value.replace(/-/g," "),l.focus());c.addEventListener("keydown",(function(e){13===(e.keyCode||e.which||0)&&(e.preventDefault(),l.blur())}));const p=c.querySelectorAll("select");for(a=0;a<p.length;a++)i=e(p[a]).find("option:eq(0)"),e(i).html("").removeAttr("selected");(function(t,n){let r;for(r=0;r<n.length;r++)e(n[r]).select2({width:"100%"}).on("change",(function(){d(t)}))})(c,p),c.querySelector("#js-form-reset").addEventListener("click",(function(){!function(t,n,r){n.value="",f("terms",n.value),e(r).each((function(){this.selectedIndex=-1,e(this).trigger("select2:updated"),f(e(this).attr("name"),"any")})),m()}(0,l,p)})),m()})(document.getElementById("program-finder")),null===p().terms&&f("terms","")}),!1)}(jQuery);