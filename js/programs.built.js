!function(e){"use strict";var t,n,r,a,i,o=[];function s(){t.innerHTML=""}function c(e,t){n.className=e,n.innerHTML=t}function l(e){var t,n,r,a,i="";for((t=document.createElement("a")).setAttribute("class","cl-card"),t.setAttribute("href",e.link),t.setAttribute("data-id",e.id),n=0;n<e.program_types.length;n++){switch(e.program_types[n].slug){case"bachelors":r=["ba","Bachelor&apos;s"];break;case"ph-d":r=["phd","Ph.D."];break;case"graduate-certificate":r=["cert","Certificate"];break;case"masters":r=["ma","Master&apos;s"];break;case"professional-degree":r=["pro","Professional"];break;default:r=[]}r.length&&(i+='<li class="'+r[0]+'">'+r[1]+"</li>")}return a=e.image,a+='<ul class="badges">'+i+"</ul>",a+='<div class="cl-card-text"><h3>'+e.title+"</h3></div>",a+='<div class="cl-button">Explore</div>',t.innerHTML=a,t}function u(t){var n,r;for(r in n=function(t){var n,r,a,i;for(n={},r=t.querySelectorAll("select"),i=0;i<r.length;i++)a=e(r[i]).val(),n[e(r[i]).attr("name")]=null!=a?a:"all";return n}(t))f(r,n[r]);h()}function d(t,n){window.clearTimeout(i),(0==e(t).is(":focus")&&n>1||""!=t.value)&&(i=window.setTimeout((function(){f("terms",t.value),h()}),300))}function f(e,t){var n,r,a,i;n=window.location.toString(),r=new RegExp("([?&])"+e+"=.*?(&|$)","i"),a=-1!==n.indexOf("?")?"&":"?",i=n.match(r)?n.replace(r,"$1"+e+"="+t+"$2"):n+a+e+"="+t,history.pushState&&window.history.pushState({path:i},"",i)}function p(){var e,t,n;return t={},""!=(e=location.search.substring(1))&&(t=e.split("&").reduce((function(e,t,r){return n=t.split("="),e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e}),{})),t}function h(){var e,t,n,i;for(i in e=p(),t=URIProgramFinder.base+"/wp-json/uri-programs/v1/category",e)n=-1!==t.indexOf("?")?"&":"?",t+=n+i+"="+e[i];e.terms&&(t+="&s="+e.terms),t!==a&&(c("loading",'<span class="spinner"><span></span></span><div>Loading...</div>'),a=t,function(e,t){(r=new XMLHttpRequest).onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?t(r.responseText):404==r.status?(console.log("error 404 was returned"),c("error","There was an error retrieving results."),s()):console.log("something else other than 200 or 404 was returned"))},r.open("GET",e,!0),r.send()}(t,m))}function m(n){var r,a,i,u,d=JSON.parse(n),f=d.length;if(function(){var e;for(e in o)window.clearTimeout(o[e])}(),0==f)s(),c("empty","No matches found.");else if(c("results",f+" "+(1!=f?"programs match":"program matches")+" your search."),(r=e("#program-results .cl-card")).length){for(u in i=[],d)i.push(d[u].id);for(r.each((function(){-1==i.indexOf(e(this).data("id"))&&e(this).remove()})),u=0;u<f;u++)!function(n){o.push(window.setTimeout((function(){(a=e("#program-results .cl-card").eq(n.i)).length?n.data.id!=a.data("id")&&a.before(l(n.data)):t.appendChild(l(n.data))}),20*n.i))}({data:d[u],i:u})}else for(u=0;u<f;u++)!function(e){o.push(window.setTimeout((function(){t.appendChild(l(e.data))}),20*e.i))}({data:d[u],i:u})}window.addEventListener("load",(function(){(function(r){var a,i,o,s,c,l,p=0;for(function(e){(t=document.createElement("div")).id="program-results",t.className="cl-tiles thirds fitted reveal",e.parentNode.insertBefore(t,e.nextSibling)}(r),function(e){(n=document.createElement("div")).id="program-status",e.parentNode.insertBefore(n,e.nextSibling)}(r),o=r.querySelectorAll(".program-finder-nojs"),a=0;a<o.length;a++)o[a].style.display="none";i=r.querySelector(".has-js"),e(i).css("display","block"),(c=i.querySelector('input[name="s"]'))&&(c.addEventListener("keyup",(function(){d(this,p)}),!1),c.addEventListener("blur",(function(){d(this,++p)}),!1),c.value=c.value.replace(/-/g," "),c.focus());for(i.addEventListener("keydown",(function(e){13==(e.keyCode||e.which||0)&&(e.preventDefault(),c.blur())})),s=i.querySelectorAll("select"),a=0;a<s.length;a++)l=e(s[a]).find("option:eq(0)"),e(l).html("").removeAttr("selected");(function(t,n){var r;for(r=0;r<n.length;r++)e(n[r]).chosen().on("change",(function(){u(t)}))})(i,s),i.querySelector("#js-form-reset").addEventListener("click",(function(){!function(t,n,r){n.value="",f("terms",n.value),e(r).each((function(){this.selectedIndex=-1,e(this).trigger("chosen:updated"),f(e(this).attr("name"),"any")})),h()}(0,c,s)})),h()})(document.getElementById("program-finder")),null==p().terms&&f("terms","")}),!1)}(jQuery);